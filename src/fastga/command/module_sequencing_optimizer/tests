import warnings

warnings.filterwarnings(action="ignore")

import os.path as pth
import os
import openmdao.api as om
from fastoad import api as api_cs25
from fastga.command import api as api_cs23
import logging
from fastoad.gui import VariableViewer
import shutil

# Define relative path
DATA_FOLDER_PATH = "data"
WORK_FOLDER_PATH = "workdir"

# Remove work folder

# Define files
CONFIGURATION_FILE = pth.join(WORK_FOLDER_PATH, "oad_process_test.yml")
#CONFIGURATION_FILE = "/Users/BielGaliot/Documents/GitHub/FAST-GA/integration_tests/oad_process/data/oad_process_be76.yml"
SOURCE_FILE = "/Users/BielGaliot/Documents/GitHub/FAST-GA/integration_tests/oad_process/results/oad_process_outputs.xml"

# For having log messages on screen
logging.basicConfig(level=logging.INFO, format="%(levelname)-8s: %(message)s")

api_cs25.generate_inputs(CONFIGURATION_FILE, SOURCE_FILE, overwrite=True)
eval_problem = api_cs25.evaluate_problem(CONFIGURATION_FILE, overwrite=True)

OUTPUT_FILE = pth.join(WORK_FOLDER_PATH, "problem_outputs.xml")
Beechcraft_OUTPUT_FILE = pth.join(WORK_FOLDER_PATH, "problem_outputs_Beechcraft_800nm_mda.xml")
shutil.copy(OUTPUT_FILE, Beechcraft_OUTPUT_FILE)
